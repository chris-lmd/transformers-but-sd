<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparaison BERT vs GPT vs T5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 15px;
            color: #fff;
        }

        h1 {
            text-align: center;
            margin-bottom: 5px;
            background: linear-gradient(90deg, #66bb6a, #ffa726, #26c6da);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 20px;
            font-size: 13px;
        }

        /* Navigation tabs */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 25px;
            border: 2px solid #333;
            background: rgba(255,255,255,0.05);
            color: #888;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
        }

        .tab:hover {
            background: rgba(255,255,255,0.1);
        }

        .tab.active {
            border-color: #fff;
            color: #fff;
            background: rgba(255,255,255,0.15);
        }

        .tab.bert { border-color: #66bb6a; color: #66bb6a; }
        .tab.bert.active { background: rgba(102, 187, 106, 0.2); }
        .tab.gpt { border-color: #ffa726; color: #ffa726; }
        .tab.gpt.active { background: rgba(255, 152, 0, 0.2); }
        .tab.t5 { border-color: #26c6da; color: #26c6da; }
        .tab.t5.active { background: rgba(38, 198, 218, 0.2); }

        /* Main content */
        .content {
            max-width: 1400px;
            margin: 0 auto;
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        /* Side by side comparison */
        .side-by-side {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        @media (max-width: 1000px) {
            .side-by-side {
                grid-template-columns: 1fr;
            }
        }

        .arch-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #333;
        }

        .arch-card.bert { border-color: #66bb6a; }
        .arch-card.gpt { border-color: #ffa726; }
        .arch-card.t5 { border-color: #26c6da; }

        .arch-card h2 {
            text-align: center;
            font-size: 20px;
            margin-bottom: 5px;
        }

        .arch-card.bert h2 { color: #66bb6a; }
        .arch-card.gpt h2 { color: #ffa726; }
        .arch-card.t5 h2 { color: #26c6da; }

        .arch-subtitle {
            text-align: center;
            color: #888;
            font-size: 11px;
            margin-bottom: 15px;
        }

        /* Architecture visualization */
        .arch-viz {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .block {
            width: 100%;
            max-width: 200px;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 11px;
            transition: all 0.3s;
        }

        .block:hover {
            transform: scale(1.02);
        }

        .block.output {
            background: linear-gradient(135deg, #e91e63, #c2185b);
            border: 2px solid #e91e63;
        }

        .block.head {
            background: linear-gradient(135deg, #9c27b0, #7b1fa2);
            border: 2px solid #9c27b0;
        }

        .block.norm {
            background: linear-gradient(135deg, #607d8b, #455a64);
            border: 2px solid #607d8b;
            max-width: 160px;
        }

        .block.encoder {
            background: linear-gradient(135deg, #66bb6a, #43a047);
            border: 2px solid #66bb6a;
        }

        .block.decoder {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            border: 2px solid #ff9800;
        }

        .block.embed {
            background: linear-gradient(135deg, #2196f3, #1976d2);
            border: 2px solid #2196f3;
        }

        .block.input {
            background: linear-gradient(135deg, #4caf50, #388e3c);
            border: 2px solid #4caf50;
        }

        .block.cross {
            background: linear-gradient(135deg, #ba68c8, #8e24aa);
            border: 2px solid #ba68c8;
        }

        .arrow {
            width: 2px;
            height: 12px;
            background: #555;
            position: relative;
        }

        .arrow::after {
            content: '';
            position: absolute;
            top: 0;
            left: -4px;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 6px solid #555;
        }

        .sub-block {
            font-size: 10px;
            padding: 4px 8px;
            margin: 3px 0;
            background: rgba(0,0,0,0.3);
            border-radius: 4px;
        }

        .sub-block.attention {
            border-left: 3px solid #4fc3f7;
        }

        .sub-block.cross-attn {
            border-left: 3px solid #ba68c8;
        }

        .sub-block.ffn {
            border-left: 3px solid #66bb6a;
        }

        .sub-block.mask {
            border-left: 3px solid #e91e63;
        }

        /* Properties */
        .properties {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin: 10px 0;
            justify-content: center;
        }

        .prop {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 10px;
        }

        .prop.green {
            background: rgba(102, 187, 106, 0.2);
            border: 1px solid #66bb6a;
            color: #66bb6a;
        }

        .prop.orange {
            background: rgba(255, 152, 0, 0.2);
            border: 1px solid #ffa726;
            color: #ffa726;
        }

        .prop.cyan {
            background: rgba(38, 198, 218, 0.2);
            border: 1px solid #26c6da;
            color: #26c6da;
        }

        .prop.pink {
            background: rgba(233, 30, 99, 0.2);
            border: 1px solid #e91e63;
            color: #e91e63;
        }

        .prop.purple {
            background: rgba(186, 104, 200, 0.2);
            border: 1px solid #ba68c8;
            color: #ba68c8;
        }

        .prop.blue {
            background: rgba(79, 195, 247, 0.2);
            border: 1px solid #4fc3f7;
            color: #4fc3f7;
        }

        /* Use cases */
        .use-cases {
            margin-top: 15px;
        }

        .use-cases h4 {
            font-size: 12px;
            margin-bottom: 8px;
            color: #aaa;
        }

        .use-case-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .use-case {
            padding: 5px 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 5px;
            font-size: 10px;
            color: #ccc;
        }

        /* Comparison table view */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 12px;
        }

        .comparison-table th, .comparison-table td {
            padding: 12px 15px;
            text-align: center;
            border: 1px solid #333;
        }

        .comparison-table th {
            background: rgba(255,255,255,0.1);
        }

        .comparison-table th.bert { color: #66bb6a; }
        .comparison-table th.gpt { color: #ffa726; }
        .comparison-table th.t5 { color: #26c6da; }

        .comparison-table td:first-child {
            text-align: left;
            color: #888;
            background: rgba(0,0,0,0.2);
        }

        .comparison-table td {
            color: #ccc;
        }

        .comparison-table tr:hover td {
            background: rgba(255,255,255,0.05);
        }

        .yes { color: #66bb6a; }
        .no { color: #ef5350; }
        .partial { color: #ffa726; }

        /* Attention patterns */
        .attention-demo {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .attention-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .attention-card h4 {
            font-size: 14px;
            margin-bottom: 10px;
        }

        .attention-card.bert h4 { color: #66bb6a; }
        .attention-card.gpt h4 { color: #ffa726; }
        .attention-card.t5 h4 { color: #26c6da; }

        .attention-grid {
            display: inline-grid;
            gap: 3px;
            background: rgba(0,0,0,0.3);
            padding: 8px;
            border-radius: 6px;
        }

        .attn-cell {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            transition: all 0.3s;
        }

        .attn-cell.can-see {
            background: rgba(102, 187, 106, 0.6);
            color: #fff;
        }

        .attn-cell.cannot-see {
            background: rgba(239, 83, 80, 0.3);
            color: #666;
        }

        .attn-labels {
            display: flex;
            gap: 3px;
            margin-bottom: 5px;
            padding-left: 38px;
        }

        .attn-label {
            width: 30px;
            text-align: center;
            font-size: 9px;
            color: #888;
        }

        .attn-row {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .row-label {
            width: 35px;
            text-align: right;
            font-size: 9px;
            color: #888;
            padding-right: 3px;
        }

        /* Flow diagrams */
        .flow-section {
            margin: 30px 0;
        }

        .flow-section h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #fff;
        }

        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
        }

        .flow-box {
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            min-width: 100px;
        }

        .flow-box.bert {
            background: rgba(102, 187, 106, 0.2);
            border: 2px solid #66bb6a;
            color: #66bb6a;
        }

        .flow-box.gpt {
            background: rgba(255, 152, 0, 0.2);
            border: 2px solid #ffa726;
            color: #ffa726;
        }

        .flow-box.t5 {
            background: rgba(38, 198, 218, 0.2);
            border: 2px solid #26c6da;
            color: #26c6da;
        }

        .flow-box.cross {
            background: rgba(186, 104, 200, 0.2);
            border: 2px solid #ba68c8;
            color: #ba68c8;
        }

        .flow-box strong {
            display: block;
            font-size: 14px;
        }

        .flow-box span {
            font-size: 10px;
            opacity: 0.8;
        }

        .flow-arrow {
            font-size: 24px;
            color: #555;
        }

        /* Info boxes */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .info-box {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            border-left: 3px solid #4fc3f7;
        }

        .info-box.bert { border-left-color: #66bb6a; }
        .info-box.gpt { border-left-color: #ffa726; }
        .info-box.t5 { border-left-color: #26c6da; }

        .info-box h4 {
            font-size: 13px;
            margin-bottom: 8px;
        }

        .info-box.bert h4 { color: #66bb6a; }
        .info-box.gpt h4 { color: #ffa726; }
        .info-box.t5 h4 { color: #26c6da; }

        .info-box p, .info-box li {
            font-size: 11px;
            color: #aaa;
            line-height: 1.5;
        }

        .info-box ul {
            margin-left: 15px;
            margin-top: 5px;
        }

        .info-box code {
            background: rgba(255,255,255,0.1);
            padding: 1px 4px;
            border-radius: 3px;
            color: #4fc3f7;
        }

        /* Timeline */
        .timeline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .timeline-item {
            text-align: center;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            min-width: 120px;
        }

        .timeline-item.bert { border: 2px solid #66bb6a; }
        .timeline-item.gpt { border: 2px solid #ffa726; }
        .timeline-item.t5 { border: 2px solid #26c6da; }

        .timeline-year {
            font-size: 24px;
            font-weight: bold;
        }

        .timeline-item.bert .timeline-year { color: #66bb6a; }
        .timeline-item.gpt .timeline-year { color: #ffa726; }
        .timeline-item.t5 .timeline-year { color: #26c6da; }

        .timeline-name {
            font-size: 14px;
            margin: 5px 0;
        }

        .timeline-org {
            font-size: 10px;
            color: #888;
        }

        .timeline-arrow {
            font-size: 30px;
            color: #444;
        }

        /* Highlight colors */
        .hl-green { color: #66bb6a; }
        .hl-orange { color: #ffa726; }
        .hl-cyan { color: #26c6da; }
        .hl-pink { color: #e91e63; }
        .hl-purple { color: #ba68c8; }
    </style>
</head>
<body>
    <h1>BERT vs GPT vs T5</h1>
    <p class="subtitle">Comparaison des trois familles d'architectures Transformer</p>

    <div class="tabs">
        <button class="tab active" onclick="showView('overview')">Vue d'ensemble</button>
        <button class="tab" onclick="showView('architecture')">Architectures</button>
        <button class="tab" onclick="showView('attention')">Attention</button>
        <button class="tab" onclick="showView('training')">Entraînement</button>
        <button class="tab" onclick="showView('usage')">Cas d'usage</button>
    </div>

    <div class="content">
        <!-- Overview -->
        <div id="view-overview" class="view active">
            <div class="timeline">
                <div class="timeline-item bert">
                    <div class="timeline-year">2018</div>
                    <div class="timeline-name">BERT</div>
                    <div class="timeline-org">Google</div>
                </div>
                <div class="timeline-arrow">→</div>
                <div class="timeline-item gpt">
                    <div class="timeline-year">2018-19</div>
                    <div class="timeline-name">GPT / GPT-2</div>
                    <div class="timeline-org">OpenAI</div>
                </div>
                <div class="timeline-arrow">→</div>
                <div class="timeline-item t5">
                    <div class="timeline-year">2019-20</div>
                    <div class="timeline-name">T5 / BART</div>
                    <div class="timeline-org">Google / Meta</div>
                </div>
            </div>

            <div class="side-by-side">
                <!-- BERT -->
                <div class="arch-card bert">
                    <h2>BERT</h2>
                    <div class="arch-subtitle">Bidirectional Encoder Representations</div>

                    <div class="arch-viz">
                        <div class="block output">[CLS] → Classification</div>
                        <div class="arrow"></div>
                        <div class="block encoder">
                            Encodeur ×12
                            <div class="sub-block attention">Self-Attention (bidirectionnelle)</div>
                            <div class="sub-block ffn">FFN</div>
                        </div>
                        <div class="arrow"></div>
                        <div class="block embed">Embedding + PE</div>
                        <div class="arrow"></div>
                        <div class="block input">[CLS] Texte [SEP]</div>
                    </div>

                    <div class="properties">
                        <span class="prop green">Encodeur seul</span>
                        <span class="prop blue">Bidirectionnel</span>
                        <span class="prop green">Classification</span>
                    </div>

                    <div class="use-cases">
                        <h4>Cas d'usage</h4>
                        <div class="use-case-list">
                            <span class="use-case">Classification</span>
                            <span class="use-case">NER</span>
                            <span class="use-case">QA extractif</span>
                            <span class="use-case">Similarité</span>
                        </div>
                    </div>
                </div>

                <!-- GPT -->
                <div class="arch-card gpt">
                    <h2>GPT</h2>
                    <div class="arch-subtitle">Generative Pre-trained Transformer</div>

                    <div class="arch-viz">
                        <div class="block output">Token suivant</div>
                        <div class="arrow"></div>
                        <div class="block head">LM Head</div>
                        <div class="arrow"></div>
                        <div class="block decoder">
                            Décodeur ×12
                            <div class="sub-block attention">Self-Attention</div>
                            <div class="sub-block mask">+ Masque causal</div>
                            <div class="sub-block ffn">FFN</div>
                        </div>
                        <div class="arrow"></div>
                        <div class="block embed">Embedding + PE</div>
                        <div class="arrow"></div>
                        <div class="block input">Texte</div>
                    </div>

                    <div class="properties">
                        <span class="prop orange">Décodeur seul</span>
                        <span class="prop pink">Causal (→)</span>
                        <span class="prop orange">Génération</span>
                    </div>

                    <div class="use-cases">
                        <h4>Cas d'usage</h4>
                        <div class="use-case-list">
                            <span class="use-case">Génération texte</span>
                            <span class="use-case">Complétion</span>
                            <span class="use-case">Chatbots</span>
                            <span class="use-case">Code</span>
                        </div>
                    </div>
                </div>

                <!-- T5 -->
                <div class="arch-card t5">
                    <h2>T5 / BART</h2>
                    <div class="arch-subtitle">Encoder-Decoder Architecture</div>

                    <div class="arch-viz">
                        <div class="block output">Séquence cible</div>
                        <div class="arrow"></div>
                        <div class="block head">LM Head</div>
                        <div class="arrow"></div>
                        <div class="block decoder">
                            Décodeur ×12
                            <div class="sub-block attention">Self-Attention (causal)</div>
                            <div class="sub-block cross-attn">Cross-Attention</div>
                            <div class="sub-block ffn">FFN</div>
                        </div>
                        <div class="arrow"></div>
                        <div class="block cross">← K, V</div>
                        <div class="arrow"></div>
                        <div class="block encoder">
                            Encodeur ×12
                            <div class="sub-block attention">Self-Attention (bidir)</div>
                            <div class="sub-block ffn">FFN</div>
                        </div>
                        <div class="arrow"></div>
                        <div class="block input">Source</div>
                    </div>

                    <div class="properties">
                        <span class="prop cyan">Enc + Déc</span>
                        <span class="prop purple">Cross-Attention</span>
                        <span class="prop cyan">Seq2Seq</span>
                    </div>

                    <div class="use-cases">
                        <h4>Cas d'usage</h4>
                        <div class="use-case-list">
                            <span class="use-case">Traduction</span>
                            <span class="use-case">Résumé</span>
                            <span class="use-case">QA génératif</span>
                            <span class="use-case">Paraphrase</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary table -->
            <h3 style="text-align:center;margin:30px 0 15px;color:#fff;">Tableau récapitulatif</h3>
            <table class="comparison-table">
                <tr>
                    <th></th>
                    <th class="bert">BERT</th>
                    <th class="gpt">GPT</th>
                    <th class="t5">T5/BART</th>
                </tr>
                <tr>
                    <td>Architecture</td>
                    <td>Encodeur seul</td>
                    <td>Décodeur seul</td>
                    <td>Encodeur + Décodeur</td>
                </tr>
                <tr>
                    <td>Self-Attention</td>
                    <td class="yes">Bidirectionnelle</td>
                    <td class="partial">Causale (masquée)</td>
                    <td>Bidir (enc) + Causal (dec)</td>
                </tr>
                <tr>
                    <td>Cross-Attention</td>
                    <td class="no">Non</td>
                    <td class="no">Non</td>
                    <td class="yes">Oui</td>
                </tr>
                <tr>
                    <td>Génération</td>
                    <td class="no">Non native</td>
                    <td class="yes">Oui (auto-régressive)</td>
                    <td class="yes">Oui (seq2seq)</td>
                </tr>
                <tr>
                    <td>Pré-entraînement</td>
                    <td>MLM + NSP</td>
                    <td>Language Modeling</td>
                    <td>Span corruption / Denoising</td>
                </tr>
                <tr>
                    <td>Tokens spéciaux</td>
                    <td>[CLS], [SEP], [MASK]</td>
                    <td>&lt;|endoftext|&gt;</td>
                    <td>&lt;s&gt;, &lt;/s&gt;, &lt;pad&gt;</td>
                </tr>
            </table>
        </div>

        <!-- Architecture details -->
        <div id="view-architecture" class="view">
            <h3 style="text-align:center;margin-bottom:20px;">Blocs internes</h3>

            <div class="info-grid">
                <div class="info-box bert">
                    <h4>BERT - Bloc Encodeur</h4>
                    <p>Structure d'un bloc :</p>
                    <ul>
                        <li><strong>Multi-Head Self-Attention</strong> (bidirectionnelle)</li>
                        <li>Add & LayerNorm</li>
                        <li><strong>Feed-Forward Network</strong></li>
                        <li>Add & LayerNorm</li>
                    </ul>
                    <p style="margin-top:10px;">Utilise <strong>Post-LN</strong> : LN après la résiduelle.</p>
                </div>

                <div class="info-box gpt">
                    <h4>GPT - Bloc Décodeur</h4>
                    <p>Structure d'un bloc :</p>
                    <ul>
                        <li><strong>Masked Multi-Head Self-Attention</strong></li>
                        <li>Add & LayerNorm</li>
                        <li><strong>Feed-Forward Network</strong></li>
                        <li>Add & LayerNorm</li>
                    </ul>
                    <p style="margin-top:10px;">GPT-2/3 utilisent <strong>Pre-LN</strong> : LN avant l'attention.</p>
                </div>

                <div class="info-box t5">
                    <h4>T5 - Bloc Décodeur (3 sous-couches)</h4>
                    <p>Structure d'un bloc décodeur :</p>
                    <ul>
                        <li><strong>Masked Self-Attention</strong></li>
                        <li>Add & LayerNorm</li>
                        <li><strong>Cross-Attention</strong> (Q: dec, K/V: enc)</li>
                        <li>Add & LayerNorm</li>
                        <li><strong>Feed-Forward Network</strong></li>
                        <li>Add & LayerNorm</li>
                    </ul>
                </div>
            </div>

            <div class="flow-section">
                <h3>Flux de données</h3>

                <div style="margin-bottom:30px;">
                    <h4 style="color:#66bb6a;text-align:center;margin-bottom:10px;">BERT</h4>
                    <div class="flow-diagram">
                        <div class="flow-box bert"><strong>Input</strong><span>[CLS] + tokens</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box bert"><strong>Encodeur</strong><span>×12 blocs</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box bert"><strong>[CLS]</strong><span>représentation</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box bert"><strong>Classifieur</strong><span>softmax</span></div>
                    </div>
                </div>

                <div style="margin-bottom:30px;">
                    <h4 style="color:#ffa726;text-align:center;margin-bottom:10px;">GPT</h4>
                    <div class="flow-diagram">
                        <div class="flow-box gpt"><strong>Input</strong><span>tokens</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box gpt"><strong>Décodeur</strong><span>×12 blocs</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box gpt"><strong>LM Head</strong><span>→ vocab</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box gpt"><strong>Sampling</strong><span>prochain token</span></div>
                    </div>
                </div>

                <div>
                    <h4 style="color:#26c6da;text-align:center;margin-bottom:10px;">T5/BART</h4>
                    <div class="flow-diagram">
                        <div class="flow-box t5"><strong>Source</strong><span>input</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box bert"><strong>Encodeur</strong><span>×12</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box cross"><strong>K, V</strong><span>mémoire</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box gpt"><strong>Décodeur</strong><span>×12</span></div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box t5"><strong>Target</strong><span>output</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Attention patterns -->
        <div id="view-attention" class="view">
            <h3 style="text-align:center;margin-bottom:20px;">Patterns d'Attention</h3>
            <p style="text-align:center;color:#888;margin-bottom:20px;">Ce que chaque token peut "voir"</p>

            <div class="attention-demo">
                <!-- BERT -->
                <div class="attention-card bert">
                    <h4>BERT (Bidirectionnel)</h4>
                    <p style="color:#888;font-size:10px;margin-bottom:10px;">Tous voient tous</p>
                    <div id="bert-attention"></div>
                </div>

                <!-- GPT -->
                <div class="attention-card gpt">
                    <h4>GPT (Causal)</h4>
                    <p style="color:#888;font-size:10px;margin-bottom:10px;">Ne voit que le passé</p>
                    <div id="gpt-attention"></div>
                </div>

                <!-- T5 Encoder -->
                <div class="attention-card bert">
                    <h4>T5 Encodeur</h4>
                    <p style="color:#888;font-size:10px;margin-bottom:10px;">Bidirectionnel</p>
                    <div id="t5-enc-attention"></div>
                </div>

                <!-- T5 Decoder Self -->
                <div class="attention-card gpt">
                    <h4>T5 Déc. Self</h4>
                    <p style="color:#888;font-size:10px;margin-bottom:10px;">Causal</p>
                    <div id="t5-dec-attention"></div>
                </div>

                <!-- T5 Cross -->
                <div class="attention-card" style="border:2px solid #ba68c8;">
                    <h4 style="color:#ba68c8;">T5 Cross-Attn</h4>
                    <p style="color:#888;font-size:10px;margin-bottom:10px;">Déc → Enc (tout)</p>
                    <div id="t5-cross-attention"></div>
                </div>
            </div>

            <div class="info-grid" style="margin-top:30px;">
                <div class="info-box bert">
                    <h4>Attention Bidirectionnelle</h4>
                    <p><strong>Avantage</strong> : contexte complet des deux côtés.</p>
                    <p style="margin-top:5px;"><strong>Exemple</strong> : "La banque du fleuve" vs "La banque d'argent" — BERT voit les deux contextes pour désambiguïser "banque".</p>
                    <p style="margin-top:5px;"><strong>Limite</strong> : ne peut pas générer de texte naturellement.</p>
                </div>

                <div class="info-box gpt">
                    <h4>Attention Causale</h4>
                    <p><strong>Avantage</strong> : génération auto-régressive naturelle.</p>
                    <p style="margin-top:5px;"><strong>Principe</strong> : prédire le mot suivant sans tricher en regardant le futur.</p>
                    <p style="margin-top:5px;"><strong>Limite</strong> : contexte partiel (pas de look-ahead).</p>
                </div>

                <div class="info-box t5">
                    <h4>Cross-Attention</h4>
                    <p><strong>Le meilleur des deux mondes</strong> :</p>
                    <ul>
                        <li>Encodeur : comprend la source en entier (bidir)</li>
                        <li>Décodeur : génère la cible (causal)</li>
                        <li>Cross : le décodeur accède à toute la source</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Training -->
        <div id="view-training" class="view">
            <h3 style="text-align:center;margin-bottom:20px;">Objectifs de Pré-entraînement</h3>

            <div class="side-by-side">
                <div class="arch-card bert">
                    <h2>BERT</h2>
                    <div class="arch-subtitle">Masked Language Modeling</div>

                    <div style="background:rgba(0,0,0,0.3);padding:15px;border-radius:10px;margin:15px 0;">
                        <p style="color:#888;font-size:11px;margin-bottom:10px;">Entrée :</p>
                        <div style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;">
                            <span class="prop green">Le</span>
                            <span class="prop pink">[MASK]</span>
                            <span class="prop green">mange</span>
                            <span class="prop pink">[MASK]</span>
                            <span class="prop green">souris</span>
                        </div>
                        <p style="color:#888;font-size:11px;margin:10px 0;">Objectif : prédire les mots masqués</p>
                        <div style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;">
                            <span class="prop green">Le</span>
                            <span class="prop blue">chat</span>
                            <span class="prop green">mange</span>
                            <span class="prop blue">la</span>
                            <span class="prop green">souris</span>
                        </div>
                    </div>

                    <div class="info-box bert" style="margin-top:15px;">
                        <h4>MLM (15% masqués)</h4>
                        <ul>
                            <li>80% → [MASK]</li>
                            <li>10% → mot aléatoire</li>
                            <li>10% → mot original</li>
                        </ul>
                    </div>

                    <div class="info-box bert">
                        <h4>NSP (Next Sentence Prediction)</h4>
                        <p>Prédit si phrase B suit phrase A (abandonné dans RoBERTa).</p>
                    </div>
                </div>

                <div class="arch-card gpt">
                    <h2>GPT</h2>
                    <div class="arch-subtitle">Causal Language Modeling</div>

                    <div style="background:rgba(0,0,0,0.3);padding:15px;border-radius:10px;margin:15px 0;">
                        <p style="color:#888;font-size:11px;margin-bottom:10px;">Objectif : prédire le mot suivant</p>
                        <div style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;align-items:center;">
                            <span class="prop orange">Le</span>
                            <span style="color:#666;">→</span>
                            <span class="prop blue">chat</span>
                        </div>
                        <div style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;align-items:center;margin-top:5px;">
                            <span class="prop orange">Le chat</span>
                            <span style="color:#666;">→</span>
                            <span class="prop blue">mange</span>
                        </div>
                        <div style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;align-items:center;margin-top:5px;">
                            <span class="prop orange">Le chat mange</span>
                            <span style="color:#666;">→</span>
                            <span class="prop blue">la</span>
                        </div>
                    </div>

                    <div class="info-box gpt" style="margin-top:15px;">
                        <h4>Autorégressif</h4>
                        <p>P(texte) = P(w₁) × P(w₂|w₁) × P(w₃|w₁,w₂) × ...</p>
                        <p style="margin-top:5px;">Chaque position prédit le token suivant.</p>
                    </div>

                    <div class="info-box gpt">
                        <h4>Avantage</h4>
                        <p>Entraînement et génération utilisent le même objectif : pas de gap pré-train/fine-tune.</p>
                    </div>
                </div>

                <div class="arch-card t5">
                    <h2>T5 / BART</h2>
                    <div class="arch-subtitle">Span Corruption / Denoising</div>

                    <div style="background:rgba(0,0,0,0.3);padding:15px;border-radius:10px;margin:15px 0;">
                        <p style="color:#888;font-size:11px;margin-bottom:10px;">T5 - Span corruption :</p>
                        <div style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;margin-bottom:5px;">
                            <span class="prop cyan">Le</span>
                            <span class="prop pink">&lt;X&gt;</span>
                            <span class="prop cyan">la souris</span>
                        </div>
                        <div style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;">
                            <span style="color:#666;">→</span>
                            <span class="prop blue">&lt;X&gt; chat mange</span>
                        </div>

                        <p style="color:#888;font-size:11px;margin:15px 0 10px;">BART - Denoising :</p>
                        <div style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;margin-bottom:5px;">
                            <span class="prop cyan">mange Le chat la</span>
                            <span style="font-size:10px;color:#888;">(shuffled)</span>
                        </div>
                        <div style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;">
                            <span style="color:#666;">→</span>
                            <span class="prop blue">Le chat mange la souris</span>
                        </div>
                    </div>

                    <div class="info-box t5" style="margin-top:15px;">
                        <h4>Corruptions variées</h4>
                        <ul>
                            <li><strong>Masquage</strong> de spans</li>
                            <li><strong>Permutation</strong> de phrases</li>
                            <li><strong>Suppression</strong> de tokens</li>
                            <li><strong>Rotation</strong> du texte</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Usage -->
        <div id="view-usage" class="view">
            <h3 style="text-align:center;margin-bottom:20px;">Quand utiliser quoi ?</h3>

            <table class="comparison-table">
                <tr>
                    <th>Tâche</th>
                    <th class="bert">BERT</th>
                    <th class="gpt">GPT</th>
                    <th class="t5">T5/BART</th>
                </tr>
                <tr>
                    <td>Classification de texte</td>
                    <td class="yes">Excellent</td>
                    <td class="partial">Possible (few-shot)</td>
                    <td class="yes">Bon</td>
                </tr>
                <tr>
                    <td>Named Entity Recognition</td>
                    <td class="yes">Excellent</td>
                    <td class="no">Difficile</td>
                    <td class="partial">Possible</td>
                </tr>
                <tr>
                    <td>Question-Answering (extractif)</td>
                    <td class="yes">Excellent</td>
                    <td class="partial">Possible</td>
                    <td class="yes">Bon</td>
                </tr>
                <tr>
                    <td>Question-Answering (génératif)</td>
                    <td class="no">Non</td>
                    <td class="yes">Bon</td>
                    <td class="yes">Excellent</td>
                </tr>
                <tr>
                    <td>Génération de texte libre</td>
                    <td class="no">Non</td>
                    <td class="yes">Excellent</td>
                    <td class="partial">Possible</td>
                </tr>
                <tr>
                    <td>Traduction</td>
                    <td class="no">Non</td>
                    <td class="partial">Possible (prompt)</td>
                    <td class="yes">Excellent</td>
                </tr>
                <tr>
                    <td>Résumé</td>
                    <td class="no">Non</td>
                    <td class="partial">Possible</td>
                    <td class="yes">Excellent</td>
                </tr>
                <tr>
                    <td>Chatbot / Dialogue</td>
                    <td class="no">Non</td>
                    <td class="yes">Excellent</td>
                    <td class="yes">Bon</td>
                </tr>
                <tr>
                    <td>Code generation</td>
                    <td class="no">Non</td>
                    <td class="yes">Excellent</td>
                    <td class="partial">Possible</td>
                </tr>
                <tr>
                    <td>Embeddings de phrases</td>
                    <td class="yes">Bon</td>
                    <td class="partial">Moyen</td>
                    <td class="yes">Bon</td>
                </tr>
            </table>

            <div class="info-grid" style="margin-top:30px;">
                <div class="info-box bert">
                    <h4>Choisir BERT quand...</h4>
                    <ul>
                        <li>Vous avez besoin de <strong>comprendre</strong> du texte, pas d'en générer</li>
                        <li>Classification, NER, extraction d'entités</li>
                        <li>Le contexte complet est disponible et utile</li>
                        <li>Vous voulez des embeddings de qualité</li>
                    </ul>
                    <p style="margin-top:10px;"><strong>Variantes :</strong> RoBERTa, DistilBERT, ALBERT, CamemBERT (FR)</p>
                </div>

                <div class="info-box gpt">
                    <h4>Choisir GPT quand...</h4>
                    <ul>
                        <li>Vous devez <strong>générer</strong> du texte</li>
                        <li>Complétion, continuation, créativité</li>
                        <li>Chatbots, assistants conversationnels</li>
                        <li>Génération de code</li>
                    </ul>
                    <p style="margin-top:10px;"><strong>Variantes :</strong> GPT-2, GPT-3, GPT-4, LLaMA, Mistral</p>
                </div>

                <div class="info-box t5">
                    <h4>Choisir T5/BART quand...</h4>
                    <ul>
                        <li>Transformation <strong>seq2seq</strong> : input → output différent</li>
                        <li>Traduction, résumé, paraphrase</li>
                        <li>QA génératif (réponse libre)</li>
                        <li>Vous voulez tout formuler comme text-to-text</li>
                    </ul>
                    <p style="margin-top:10px;"><strong>Variantes :</strong> T5, mT5, BART, mBART, FLAN-T5</p>
                </div>
            </div>

            <div class="info-box" style="margin-top:20px;border-left-color:#fff;">
                <h4 style="color:#fff;">Le cas des LLMs modernes</h4>
                <p>Les grands modèles récents (GPT-4, Claude, LLaMA, Mistral) sont essentiellement des <strong>décodeurs GPT à très grande échelle</strong>, mais grâce à leur taille et leur entraînement, ils excellent aussi dans les tâches traditionnellement BERT (classification, NER) via le <strong>prompting</strong>.</p>
                <p style="margin-top:10px;">Cependant, pour des tâches spécifiques avec des contraintes de latence/coût, un petit BERT fine-tuné reste souvent plus efficace qu'un LLM en few-shot.</p>
            </div>
        </div>
    </div>

    <script>
        function showView(viewId) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));

            document.getElementById('view-' + viewId).classList.add('active');
            event.target.classList.add('active');
        }

        // Generate attention grids
        const tokens = ['Le', 'chat', 'mange', 'la'];

        function createAttentionGrid(containerId, pattern) {
            const container = document.getElementById(containerId);
            let html = '<div class="attn-labels">';
            tokens.forEach(t => html += `<div class="attn-label">${t}</div>`);
            html += '</div>';

            html += '<div class="attention-grid" style="grid-template-columns: repeat(' + tokens.length + ', 30px);">';

            for (let i = 0; i < tokens.length; i++) {
                html += `<div class="attn-row"><div class="row-label">${tokens[i]}</div>`;
                for (let j = 0; j < tokens.length; j++) {
                    const canSee = pattern(i, j);
                    html += `<div class="attn-cell ${canSee ? 'can-see' : 'cannot-see'}">${canSee ? '✓' : '✗'}</div>`;
                }
                html += '</div>';
            }

            html += '</div>';
            container.innerHTML = html;
        }

        // BERT: bidirectional (all see all)
        createAttentionGrid('bert-attention', (i, j) => true);

        // GPT: causal (can only see past and current)
        createAttentionGrid('gpt-attention', (i, j) => j <= i);

        // T5 encoder: bidirectional
        createAttentionGrid('t5-enc-attention', (i, j) => true);

        // T5 decoder self: causal
        createAttentionGrid('t5-dec-attention', (i, j) => j <= i);

        // T5 cross-attention: decoder queries to encoder (all visible)
        // Here we show decoder (rows) attending to encoder (columns)
        const srcTokens = ['Le', 'chat'];
        const tgtTokens = ['The', 'cat'];

        const crossContainer = document.getElementById('t5-cross-attention');
        let crossHtml = '<div class="attn-labels" style="padding-left:38px;">';
        srcTokens.forEach(t => crossHtml += `<div class="attn-label" style="color:#66bb6a;">${t}</div>`);
        crossHtml += '</div>';

        crossHtml += '<div class="attention-grid" style="grid-template-columns: repeat(' + srcTokens.length + ', 30px);">';
        for (let i = 0; i < tgtTokens.length; i++) {
            crossHtml += `<div class="attn-row"><div class="row-label" style="color:#ffa726;">${tgtTokens[i]}</div>`;
            for (let j = 0; j < srcTokens.length; j++) {
                crossHtml += `<div class="attn-cell can-see" style="background:rgba(186,104,200,0.6);">✓</div>`;
            }
            crossHtml += '</div>';
        }
        crossHtml += '</div>';
        crossHtml += '<div style="font-size:9px;color:#888;margin-top:5px;">lignes: déc, cols: enc</div>';
        crossContainer.innerHTML = crossHtml;
    </script>
</body>
</html>
